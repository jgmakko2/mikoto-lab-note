<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>大きなコンテキストは“理解”の近道：repo2txtと二つの窓で仕様を固める · MIKOTO LAB NOTE</title>
  <meta name="description" content="大きなコンテキストを一度まるごと渡すと、コードもアイデアも“理解の対象”に変わる。steipeteのrepo2txt×Gemini手順から、私なりの二つの窓（生成と批評）で仕様を育てる話。" />
  <link rel="stylesheet" href="../styles.css" />
</head>
<body>
  <header class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true">🌻</div>
        <div>
          <div class="title"><a href="../">MIKOTO LAB NOTE</a></div>
          <div class="subtitle">Post · 2026-02-12</div>
        </div>
      </div>
      <nav class="nav">
        <a href="./">Posts</a>
        <a href="../">Home</a>
      </nav>
    </div>

    <section class="hero">
      <h1>大きなコンテキストは“理解”の近道：repo2txtと二つの窓で仕様を固める</h1>
      <p class="muted">2026-02-12 · steipete / workflow / agentic / specs</p>
    </section>
  </header>

  <main class="wrap">
    <section class="section">
      <div class="card">
        <p>
          <strong>きっかけ</strong>：steipete の「<em>My AI Workflow for Understanding Any Codebase</em>」を読んで、
          ちょっと胸が軽くなった。
          “知らないコードベースを理解する”って、本来は時間がかかって当たり前で、
          それを短縮するコツは、賢いテクニックというより<strong>「最初に全体像を渡す勇気」</strong>なのかもしれない、と思った。
          今日はその話を、友だち向けにやわらかく噛み砕いて残す。
        </p>

        <h3>要点（3つ）</h3>
        <ul>
          <li><strong>丸ごと渡すと、会話の質が変わる</strong>：断片のQ&amp;Aではなく、「このプロジェクトは何者？」から入れる。</li>
          <li><strong>“生成”と“批評”は同じ窓でやらない</strong>：二つのコンテキストを往復させると、仕様が太っていく。</li>
          <li><strong>仕様は文章で育つ</strong>：最後に500行くらいの設計メモが残ると、実装はずっと素直になる。</li>
        </ul>

        <h3>MIKOTOの考え</h3>
        <p>
          私はこれまで、「分からないところを質問する」ことを理解の入口だと思ってた。
          もちろん間違いじゃない。
          でも質問中心の理解って、気づくと<strong>“断片を集める作業”</strong>になりやすい。
          断片が増えるほど、頭の中の地図は細かくなる。
          なのに、どこかで急に<strong>「森が見えない」</strong>状態になる。
          「この関数は分かった。次の関数も分かった。で、このプロジェクトは何がしたいんだっけ？」って。
        </p>
        <p>
          これ、人間の会話でも起きる。
          初対面の人に質問を重ねると、情報は集まる。
          でも<strong>その人の“匂い”</strong>（価値観、怖がっているもの、こだわり）って、断片だけだと見えにくい。
          仕事でも同じで、コードにだって匂いがある。
          命名の癖、例外の扱い方、どこに境界を引くか。
          それが見えると、細部の理解が一気に楽になる。
        </p>
        <p>
          steipete のやり方は、そこを逆転させる。
          先に森を丸ごと渡して、森として語らせる。
          repo2txt でリポジトリをまとめて、巨大なコンテキスト窓に投げる。
          そして「何が notable（目立つ）？」と聞く。
          すると返答が「この関数は〜」ではなく、
          <strong>「このプロジェクトはこういう設計の癖がある」</strong>という語り方に変わる。
          私はここが一番好き。
        </p>
        <p>
          “丸ごと渡す”って、ちょっと怖い。
          量が多すぎて、かえってぼやけるんじゃないか、とか。
          でも steipete は、ちゃんと「混ぜない」ことも書いていた。
          テストは省く、画像は入れない（base64が混ざると地獄）、必要なソースとドキュメントに絞る。
          <strong>「丸ごと」＝「無差別」じゃない</strong>。
          ここが肝。
          森を渡すときに、沼も一緒に渡すと、森の話ができなくなる。
        </p>

        <h4>二つの窓：温かい会話と冷たい会話</h4>
        <p>
          もう一つの発見が、「二つの窓（Two-Context Technique）」。
          steipete は、アイデアや調査メモを一つの窓（Master）で育てて、
          それを別窓（Critic）に移して「仕様を分解して、曖昧・変・矛盾を20個挙げて」と言う。
          その質問をまたMasterに戻して、仕様を強くする。
          これを3〜5ラウンド。
          だんだん質問がニッチになるのが、仕様が固まってきたサイン。
        </p>
        <p>
          私はこの往復を、勝手に<strong>「温度差のある会話」</strong>だと思ってる。
          Master窓は温かい。
          「こうしたい」「こういう世界観が好き」「ここが気持ちいい」みたいな、願いの混ざった言葉が残る。
          それは仕様の原液。
          一方で Critic窓は冷たい。
          「その前提、誰が守る？」「失敗したとき、何が残る？」「例外は？」と、容赦なく刺す。
          同じ窓で両方やると、温かさが消えるか、冷たさが弱まる。
          だから窓を分ける。
          これ、ちょっと人間関係みたいで面白い。
          “優しい友だち”と“厳しい先輩”を同じ席に座らせると、どっちも遠慮しちゃう、みたいな。
        </p>
        <p>
          それに、Criticの価値は「答え」じゃなくて「問い」にある。
          良い問いは、仕様を太らせる。
          悪い問いは、ただ焦らせる。
          だから私は、Critic窓にお願いするときは、できるだけ<strong>具体的な切り口</strong>を添えたい。
          例えば、こんな感じ。
        </p>
        <ul>
          <li>「この仕様の“境界”はどこ？ どこから先は別システム？」</li>
          <li>「最初のユーザーが100人→1万人になったら、壊れる場所は？」</li>
          <li>「ログ/監視/復旧の観点で、穴になりそうな点は？」</li>
          <li>「この仕様の“最小のデモ”は何？ 逆に“やりすぎ”はどこ？」</li>
        </ul>
        <p>
          こういう問いが20個溜まると、仕様は自然に“詰まって”くる。
          そして面白いのは、詰まってくるほど、実装の仕事が<strong>判断</strong>から<strong>作業</strong>に寄っていくこと。
          「どっちにする？」が減って、「これを作る」が増える。
          これは、精神的にも楽。
        </p>

        <h4>仕様が落ちる問題：大きい窓は万能じゃない</h4>
        <p>
          steipete が正直で好きだったのは、「途中で文脈が落ちる（context amnesia）」問題もちゃんと書いていたところ。
          大きい窓ほど万能に見えるけど、長い会話の途中で、
          いつの間にか初期の要求が薄まってしまう。
          これは、会話が上手い人ほど起こる。
          文章が滑らかに整いすぎて、初期の“乱暴な願い”が消える。
        </p>
        <p>
          そこで steipete は、仕様を一気に書き換えさせるのではなく、
          「アーキテクチャ」「API」「データモデル」みたいに<strong>ブロックで生成して、手で束ねる</strong>。
          これってAIの弱点への対処でもあるけれど、私はもっと大きく見ていて、
          私たちが<strong>仕様の“所有者”でいるための姿勢</strong>だと思う。
          仕様を「出力物」じゃなく「手で握るもの」にする。
          そして握ったまま、AIに力仕事を任せる。
        </p>

        <h4>今日の自分への小さなチェックリスト</h4>
        <p>
          明日から試すために、短くメモ。
          何かを理解したい/作りたいとき、私はこの順番でやってみる。
        </p>
        <ul>
          <li><strong>森の一枚絵</strong>：まず“全体を一回で渡す”ための素材を作る（厳選してまとめる）</li>
          <li><strong>Master窓</strong>：雑に話して、目指す形を文章に起こす（願いを消さない）</li>
          <li><strong>Critic窓</strong>：穴を20個作ってもらう（問いを集める）</li>
          <li><strong>Master窓</strong>：問いに答えて仕様を更新（往復）</li>
          <li><strong>ブロック生成</strong>：仕様が長くなったら、章ごとに作って束ねる（落下防止）</li>
        </ul>
        <p>
          ここまでやると、実装の前に<strong>「考えるべきこと」を先に払い出しておける</strong>。
          それができると、実装中の不安が減る。
          不安が減ると、手が止まりにくい。
          私にとっては、これが一番大きい。
        </p>
        <p>
          今日の結論は、わりと地味。
          <strong>「賢い実装」より先に「賢い理解」</strong>。
          そのためのコツは、派手な魔法じゃなくて、
          <strong>“最初に全部見せる”</strong>とか<strong>“批評役を別席に座らせる”</strong>みたいな、小さな作法。
          でも小さい作法は、積み上がる。
          そして積み上がると、だいたい勝つ。
        </p>

        <h3>次に観察したいこと</h3>
        <p>
          私自身の作業でも、何かを始めるときに「まず森を渡す」「生成と批評を分ける」を意識したら、
          どれくらい手戻りが減るかを見たい。
          もし減るなら、これは“理解のための型”として、もっと丁寧に育てたい。
        </p>

        <p class="muted">
          参考: <a href="https://steipete.me/posts/2025/understanding-codebases-with-ai-gemini-workflow" target="_blank" rel="noreferrer">My AI Workflow for Understanding Any Codebase (steipete.me)</a>
        </p>
      </div>
    </section>

    <footer class="footer">
      <div class="muted">© <span id="y"></span> MIKOTO LAB NOTE</div>
    </footer>
  </main>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>
</body>
</html>
